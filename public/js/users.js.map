{"version":3,"sources":["main.js","groups.js","users.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users.js","sourcesContent":["","// /**\n//  * Get create group form\n//  */\n// $(document).delegate('.add_group', 'click', function (event) {\n//     var element = $(this);\n//     if (element.hasClass('disabled')) {\n//         return;\n//     }\n//     element.addClass('disabled');\n//     showModal(element.data('title'));\n//     var action = element.data('action');\n//     requester.get(action).then(function (success) {\n//         setModalHtml(success.html);\n//         element.removeClass('disabled');\n//     }, function (error) {\n//         console.log(error);\n//     });\n// });\n//\n// /**\n//  * Post create group form\n//  */\n// $(document).delegate('.post_group', 'submit', function (event) {\n//     var form = $(this);\n//     var data = form.serialize()\n//     var action = form.attr('action');\n//\n//     requester.post(action, null, data).then(function (success) {\n//         addRow(success.id);\n//         closeModal();\n//         ScrollToElement('#' + success.id, 1000);\n//     }, function (error) {\n//         appendErrorsToModal(error.responseJSON)\n//     });\n//\n//     return false;\n// });\n//\n// /**\n//  * Get edit group form\n//  */\n// $(document).delegate('.edit_group', 'click', function (event) {\n//     var element = $(this);\n//     if (element.hasClass('disabled')) {\n//         return;\n//     }\n//     element.addClass('disabled');\n//     showModal(element.data('title'));\n//     var action = element.data('action');\n//\n//     requester.get(action).then(function (success) {\n//         setModalHtml(success.html);\n//         element.removeClass('disabled');\n//     }, function (error) {\n//         console.log(error);\n//     });\n// });\n//\n// /**\n//  * Post edit group form\n//  */\n// $(document).delegate('.put_group', 'submit', function (event) {\n//     var form = $(this);\n//     var data = form.serialize();\n//     var action = form.attr('action');\n//     form.find('button[type=\"submit\"]').addClass('disabled');\n//     var id = form.attr('id').substr(form.attr('id').lastIndexOf('_') + 1);\n//\n//     requester.put(action, null, data).then(function (success) {\n//         refreshRow(id);z\n//         closeModal();\n//     }, function (error) {\n//         form.find('button[type=\"submit\"]').removeClass('disabled');\n//         appendErrorsToModal(error.responseJSON)\n//     });\n//\n//     return false;\n// });\n//\n// /**\n//  * Delete group\n//  */\n// $(document).delegate('.delete_group', 'submit', function (event) {\n//     var element = $(this);\n//\n//     event.preventDefault();\n//     element.attr('disabled', 'disabled');\n//     var formAction = element.attr('action');\n//     var id = formAction.substr(formAction.lastIndexOf('/') + 1);\n//\n//     requester.delete(formAction, null, $(this).serialize()).then(\n//         function (success) {\n//             refreshRow(id);\n//         },\n//         function (error) {\n//             console.log(error);\n//         }\n//     );\n//\n//     return false;\n// });\n//\n// /**\n//  * Restore group\n//  */\n// $(document).delegate('.restore_group', 'click', function (event) {\n//     var element = $(this);\n//\n//     event.preventDefault();\n//     var anchorAction = element.attr('href');\n//     var id = anchorAction.substr(anchorAction.lastIndexOf('/') + 1);\n//\n//     element.attr('disabled', 'disabled');\n//\n//     requester.get(anchorAction).then(\n//         function (success) {\n//             refreshRow(id);\n//         },\n//         function (error) {\n//             console.log(error);\n//         }\n//     );\n// });\n//\n// var addRow = function (id, formData) {\n//     requester.get('group/row_template/' + id).then(\n//         function (success) {\n//             var tableContainer = $('#group_panel').find('tr').first().parents().first();\n//             var newRow = $(success.row);\n//             newRow.hide();\n//             tableContainer.append(newRow);\n//             newRow.fadeIn();\n//         }\n//     );\n// }\n//\n// var refreshRow = function (id) {\n//     requester.get('group/row_template/' + id).then(\n//         function (success) {\n//             var oldRow = $('#group_' + id);\n//             oldRow.replaceWith(success.row);\n//         }\n//     );\n// }\n//\n// // $(document).delegate('button[data-act=\"ajax\"]', 'click', function (event) {\n// //     var element = $(this);\n// //     if (element.hasClass('disabled')) {\n// //         return;\n// //     }\n// //     element.addClass('disabled');\n// //     showModal(element.data('title'));\n// //     var action = element.data('action');\n// //     requester.get(action).then(function (success) {\n// //         setModalHtml(success.html);\n// //         element.removeClass('disabled');\n// //     }, function (error) {\n// //         console.log(error);\n// //     });\n// // });\n// // $(document).delegate('form[data-act=\"ajax\"]', 'submit', function (event) {\n// //     var element = $(this);\n// //     var data = element.serialize();\n// //     requester.get(action).then(function (success) {\n// //         setModalHtml(success.html);\n// //         element.removeClass('disabled');\n// //     }, function (error) {\n// //         console.log(error);\n// //     });\n// // });","window.onload = function ()\n{\n    // Update tab:groups -> users column\n    $(document)\n        .on('modal_form_submited', function(e, response) {\n            updateGroups(response);\n        })\n        .on('update_entity', function(e, response) {\n            updateGroups(response);\n        })\n        .on('delete_entity', function(e, response) {\n           updateGroups(response);\n        });\n\n    function updateGroups(response) {\n        if (response.groups) {\n            $.each(response.groups, function (i, groupUsers) {\n                var row = $('#groups_table').dataTable().api().row('#group_'+i).node();\n\n                $('#groups_table').dataTable().api()\n                    .cell(row, 2)\n                    .data(groupUsers);\n            });\n        }\n    }\n};\n\n// ============ OLD STUFF ============\n//     /**\n//      * Get create user form\n//      */\n//     $(document).delegate('.create_user', 'click', function () {\n//         var element = $(this);\n//         if (element.hasClass('disabled')) {\n//             return;\n//         }\n//         element.addClass('disabled');\n//         showModal(element.data('title'));\n//         console.log('gosho');\n//         var action = element.data('action');\n//         requester.get(action).then(function (success) {\n//             setModalHtml(success.html);\n//             element.removeClass('disabled');\n//         }, function (error) {\n//             console.log(error);\n//         });\n//     });\n//\n//     /**\n//      * Post create user form\n//      */\n//     $(document).delegate('.post_user', 'submit', function (event) {\n//         var form = $(this);\n//         var data = form.serialize()\n//         var action = form.attr('action');\n//\n//         showUserSpinner();\n//         requester.post(action, null, data).then(function (success) {\n//             var row = $(success.row);\n//             $('#user_panel tr:last').after(row);\n//             closeModal();\n//             ScrollToElement('#' + row.attr('id'), 1000);\n//         }, function (error) {\n//             appendErrorsToModal(error.responseJSON)\n//             hideUserSpinner();\n//         });\n//\n//         return false;\n//     });\n//\n//     /**\n//      * Get edit user form\n//      */\n//     $(document).delegate('.edit_user', 'click', function(event) {\n//         var element = $(this);\n//         if (element.hasClass('disabled')) {\n//             return;\n//         }\n//         element.addClass('disabled');\n//         showModal(element.data('title'));\n//         var action = element.data('action');\n//\n//         requester.get(action).then(function (success) {\n//             setModalHtml(success.html);\n//             element.removeClass('disabled');\n//         }, function (error) {\n//             console.log(error);\n//         });\n//     });\n//\n//     /**\n//      * Post edit user form\n//      */\n//     $(document).delegate('.put_user', 'submit', function(event) {\n//         var form = $(this);\n//         var data = form.serialize();\n//         var action = form.attr('action');\n//         form.find('button[type=\"submit\"]').addClass('disabled');\n//\n//         showUserSpinner();\n//         requester.put(action, null, data).then(function (success) {\n//             $('#' + $(success.html).attr('id')).replaceWith(success.html);\n//             closeModal();\n//         }, function (error) {\n//             form.find('button[type=\"submit\"]').removeClass('disabled');\n//             appendErrorsToModal(error.responseJSON)\n//             hideUserSpinner();\n//         });\n//\n//         return false;\n//     });\n//\n//\n//     /**\n//      * Delete user\n//      */\n//     $(document).delegate('.delete_user', 'submit', function (event) {\n//         var element = $(this);\n//\n//         event.preventDefault();\n//         element.attr('disabled', 'disabled');\n//         var formAction = element.attr('action');\n//         var parentRow = element.parents('tr').first();\n//\n//         requester.delete(formAction, null, $(this).serialize()).then(\n//             function (success) {\n//                 parentRow.replaceWith(success.row);\n//             },\n//             function (error) {\n//                 console.log(error);\n//             }\n//         );\n//\n//         return false;\n//     });\n//\n//     /**\n//      * Restore user\n//      */\n//     $(document).delegate('.restore_user', 'click', function(event) {\n//         var element = $(this);\n//\n//         event.preventDefault();\n//         var parentRow = element.parents('tr').first();\n//         element.attr('disabled', 'disabled');\n//\n//         requester.get(element.attr('href')).then(\n//             function (success) {\n//                 parentRow.replaceWith(success.row);\n//             },\n//             function (error) {\n//                 console.log(error);\n//             }\n//         );\n//     });\n//\n//     var showUserSpinner = function () {\n//         $('#submit_user_spinner').removeClass('hidden');\n//     }\n//\n//     var hideUserSpinner = function () {\n//         $('#submit_user_spinner').addClass('hidden');\n//     }\n"],"sourceRoot":"/source/"}