{"version":3,"sources":["loadPois.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"loadPois.js","sourcesContent":["/*\n * Add POIs to map\n */\nfunction loadMarker(poi, loc)\n{\n    var icon = L.icon({\n        iconUrl: '/images/pois/'+poi.icon+'.png',\n        iconSize:     [32, 32],\n        iconAnchor:   [16, 31],\n        popupAnchor:  [0, -30],\n        labelAnchor:  [14, -14]\n    });\n\n    var poiMarker = L.marker(loc, {\n        icon: icon\n    });\n    poiMarker.key = poi.id;\n\n    poiMarker.bindLabel(poi.translation[0].name);\n\n    return poiMarker;\n}\n\nfunction loadCircle(poi, radius, loc)\n{\n\n    var poiCircle = L.circle(loc, radius,{color: '#BD2A84'});\n    poiCircle.key = poi.id\n\n    poiCircle.bindLabel(poi.translation[0].name);\n\n    return poiCircle;\n}\n\nfunction loadPolygon(poi, polyCoords)\n{\n    var poiPolygon = L.polygon([polyCoords]);\n    poiPolygon.key = poi.id\n\n    poiPolygon.bindLabel(poi.translation[0].name);\n\n    return poiPolygon;\n}\n\nfunction loadPois()\n{\n    requester.get('/pois/json').then(function (data)\n    {\n        var pois = jQuery.parseJSON(data.pois);\n\n        if(pois.length > 0) {\n\n            // Iterate through all passed pois\n            $.each(pois, function(k, poi){\n\n                if(poi.poi_type == 'marker') {\n\n                    // Location\n                    var loc = new L.LatLng(parseFloat(poi.poi_points[0].latitude), parseFloat(poi.poi_points[0].longitude));\n                    bounds.extend(loc);\n\n                    var poiMarker = loadMarker(poi, loc);\n                    drawnPois.addLayer(poiMarker);\n\n                }\n                else if (poi.poi_type == 'polygon' || poi.poi_type == 'rectangle')\n                {\n\n                    var polyCoords = [];\n\n                    $.each(poi.poi_points, function(n, point)\n                    {\n                        polyCoords.push([parseFloat(point.latitude), parseFloat(point.longitude)]);\n                        bounds.extend(polyCoords);\n                    });\n\n                    var poiPolygon = loadPolygon(poi, polyCoords);\n                    drawnPois.addLayer(poiPolygon);\n                }\n                else if (poi.poi_type == 'circle')\n                {\n                    var radius = poi.radius;\n                    var loc = new L.LatLng(\n                        parseFloat(poi.poi_points[0].latitude),\n                        parseFloat(poi.poi_points[0].longitude)\n                        );\n                    bounds.extend(loc);\n\n                    var poiCircle = loadCircle(poi, radius, loc);\n                    drawnPois.addLayer(poiCircle);\n                }\n\n            });\n\n            drawnPois.addTo(mapper.map);\n\n            setTimeout(function() {\n                mapper.map.fitBounds(bounds, { padding: [50, 50] });\n            }, 50);\n\n\n        }\n    },\n    function (httperror) {\n\n        if(typeof httperror.status != \"undefined\" && httperror.status == 401) {\n            console.log('failed');\n            // window.location = \"/auth/login?expired=1\";\n        }\n    });\n}\n\n/*\n * Remove POIs from map\n */\nfunction hidePois()\n{\n     drawnPois.clearLayers();\n}\n"],"sourceRoot":"/source/"}